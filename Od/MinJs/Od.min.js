var Od;(function(n){var c=-1,rt=!1,k,r;n.text=function(n){return{isIVdom:!0,text:r(n)?"":n.toString()}};n.element=function(n,t,i){n=n.toUpperCase();var r=i?k(i)?i:[i]:null;return{isIVdom:!0,tag:n,props:t,children:r}};n.component=function(n,t){var r=kt(n),i;return r?r:(i={isIVdom:!0,obs:null,subcomponents:null,dom:null},i.obs=Obs.fn(function(){return bt(i,t)}),dt(n,i),i)};n.fromHtml=function(n){var t=document.createElement("DIV"),i,r;return t.innerHTML=n,i=t.childNodes.length===1?t.firstChild:t,r={isIVdom:!0,obs:d,subscription:g,dom:i},r};n.fromDom=function(n){return{isIVdom:!0,obs:d,subscription:g,dom:n}};n.bind=function(t,i){var r=i.parentNode;return n.patchDom(t,i,r)};n.appendChild=function(t,i){return n.patchDom(t,null,i)};n.dispose=function(n){var i,t,r;n&&(i=n.obs,i&&(Obs.dispose(i),n.obs=null),t=n.dom,t&&(p("removed",t),u(t,null),o(t),n.dom=null),r=n.subcomponents,r&&(ni(r),n.subcomponents=null))};n.deferComponentUpdates=!0;k=function(n){return n instanceof Array};r=function(n){return n==null};n.patchDom=function(t,i,r){var u=typeof t=="string"?n.text(t):t;return u.tag?et(u,i,r):u.obs?ft(u,i,r):ut(u,i,r)};var ut=function(n,t,i){var u=n.text,r=!t||t.nodeName!=="#text"?document.createTextNode(u):t;return r.nodeValue!==u&&(r.nodeValue=u),s(r,t,i),r},ft=function(n,t,i){var r=n.dom;return r!==t&&s(r,t,i),r},et=function(n,t,r){var e=n.tag,o=n.props,h=n.children,u=t,f=!u||u.tagName!==e||a(u)?document.createElement(e):u;return f!==u&&i("  Created",e),ot(f,o),at(f,h),s(f,t,r),f},ot=function(n,t){var r=l(n),i,u,f,e,o;if(t)for(i in t)i!=="style"&&lt(n,i,t[i]);if(r)for(i in r)t&&i in t||ct(n,i);u=r&&r.style;f=t&&t.style;st(n,u,f);e=r&&r.attrs;o=t&&t.attrs;ht(n,e,o);yt(n,t)},st=function(n,t,i){var u,r;if(typeof i=="string"){n.style=i;return}if(!i){t&&(n.style=null);return}u=n.style;for(r in i)u[r]=i[r];if(t)for(r in t)r in i||(u[r]=null)},ht=function(n,t,i){var r;if(i)for(r in i)n.setAttribute(r,i[r]);if(t)for(r in t)i&&r in i||n.removeAttribute(r)},ct=function(n,t){n[t]=null;n instanceof HTMLElement&&n.removeAttribute(t)},lt=function(n,t,i){t==="class"&&(t="className");n[t]=i},at=function(t,r){var u,e,f,o,h,c;for(r||(r=[]),t.keyed&&vt(r,t),u=t.firstChild,e=r.length,f=0;f<e;f++)i("Patching child",f+1),o=r[f],h=n.patchDom(o,u,t).nextSibling,u=h,i("Patched child",f+1);while(u)c=u.nextSibling,s(null,u,t),u=c,i("Removed child",++f)},vt=function(n,t){var c,l,u,s,e,f,h,y,o;i("  Reordering keyed children.");var a=n,p=t.firstChild,v=a.length;if(v!==0&&p){for(c={},u=t.firstChild;u;u=u.nextSibling){if(l=u.key,r(l))return;c[l]=u}for(u=t.firstChild,s=0;s<v;s++){if(e=a[s],f=e.tag,r(f)&&e.dom&&(f=e.dom.nodeName),!f)return;if(h=pt(e.props),r(h))return;y=u&&u.key;o=c[h];u?y===h?u=u.nextSibling:o?t.insertBefore(o,u):t.insertBefore(document.createElement(f),u):o?t.appendChild(o):t.appendChild(document.createElement(f))}}},d=Obs.of(null),g=null,oi=function(n){var t,i;if(!n)return null;var r=[],u=Object.keys(n).sort(),f=u.length;for(t=0;t<f;t++)i=u[t],r.push(i,n[i]);return r},l=function(n){return n.__Od__props},yt=function(n,t){n.__Od__props=t},pt=function(n){return n&&n.key},wt=function(n){return n.__Od__component},u=function(n,t){n&&(n.__Od__component=t)},a=function(n){return!!wt(n)},bt=function(i,r){var o,f,e;return gt(i),o=t,t=i,f=r(),t=o,i.dom?ri(i,f):(e=n.patchDom(f,null,null),u(e,i),i.dom=e,p("created",e)),f},t=null,kt=function(n){return n!=null&&t&&t.subcomponents&&t.subcomponents[n]},f="__OdAnonymousSubcomponents__",dt=function(n,i){var r,u;t&&(t.subcomponents||(t.subcomponents={}),r=t.subcomponents,n!=null?r[n]=i:(u=r[f],u?u.push(i):r[f]=[i]))},gt=function(t){var i=t.subcomponents&&t.subcomponents[f];i&&(i.forEach(n.dispose),t.subcomponents[f]=null)},ni=function(t){var i,r;for(i in t)r=t[i],i===f?r.forEach(n.dispose):n.dispose(r)},ti=function(n){return setTimeout(n,c)},ii=window.requestAnimationFrame||ti,e=[],v=0,ri=function(t,i){if(!n.deferComponentUpdates){nt(t,i);return}(e.push(t),v)||(v=ii(ui))},ui=function(){for(var r,n,u={},f=e.length,t=0;t<f;t++)(r=e[t],n=r.obs.obsid,u[n])||(i("Patching queued component #",n),nt(r),u[n]=!0);e=[];v=0;c<0&&b();c>=0&&setTimeout(b,0)},nt=function(t,i){var r,e,f;i=i!=null?i:t.obs();r=t.dom;e=r&&r.parentNode;fi(i,r)?(u(r,null),o(r)):u(r,null);f=n.patchDom(i,r,e);u(f,t);p("updated",f);t.dom=f},fi=function(n,t){return t?typeof n=="string"?t.nodeType!==Node.TEXT_NODE:t.nodeName!==n.tag:!1},y=[],o=function(n){n&&(a(n)||(i("  Discarded",n.nodeName||"#text"),y.push(n),tt)||(tt=setTimeout(ei,100)))},tt=0,ei=function(){for(var n=y.pop();n;)it(n),n=y.pop()},it=function(n){var r,u,i,f,t;if(!a(n)){r=l(n);for(u in r)n[u]=null;for(i=n.childNodes,f=i.length,t=0;t<f;t++)it(i[t])}},s=function(n,t,r){if(n)if(t){if(n===t)return;if(o(t),!r)return;i("  Inserted",n.nodeName||"#text");r&&r.replaceChild(n,t)}else i("  Inserted",n.nodeName||"#text"),r&&r.appendChild(n);else{if(!t)return;o(t);r&&r.removeChild(t)}},p=function(n,t){var i=t&&l(t),r=i&&i.onodevent;r&&((h.push(function(){return r(n,t)}),w)||(w=setTimeout(b,20)))},w=0,h=[],b=function(){for(var n=0;n<h.length;n++)h[n]();h=[];w=0},i=function(){rt&&window.console&&window.console.log&&console.log.apply(console,arguments)}})(Od||(Od={}));