var Obs,Od,Jigsaw,Oath,Xhr;(function(n){var l=!1,u,c,r;n.defaultEq=function(n,t){return n===t};n.valueOfEq=function(n,t){return n&&t&&n.valueOf()===t.valueOf()||!n&&!t};n.alwaysUpdate=function(){return!1};n.of=function(t,i){i===void 0&&(i=null);i=i||n.defaultEq;var r=null;return r=function(n){return o(r,i,n,arguments.length)},r.obsid=e++,r.value=t,r.toString=u,r};n.fn=function(t,i){i===void 0&&(i=n.defaultEq);var r=null;return r=function(n){return o(r,i,n,arguments.length)},r.obsid=e++,r.fn=function(){return a(r,t,i)},r.dependencies={},r.toString=u,s(r),r};n.peek=function(n){return n.value};n.isObservable=function(n){return n&&n.obsid&&n instanceof Function};n.isComputed=function(n){return!!n.fn};n.subscribe=function(n,t){for(var f,h=function(){var n=i;i=null;t();i=n},r=h,c=e++,o=n,s=0;s<o.length;s++)f=o[s],f.dependents||(f.dependents={}),f.dependents[c]=r;return r.obsid=c,r.fn=h,r.value="{subscription}",r.toString=u,r.subscriptions=o,r.level=999999999,r};n.value=function(t){return n.isObservable(t)?t():t};n.toStringMaxValueLength=32;u=function(){var t=JSON.stringify(this.value);return t&&n.toStringMaxValueLength<t.length&&(t=t.substr(0,n.toStringMaxValueLength)+"..."),"{obs "+(this.id||"")+" = "+t+"}"};n.dispose=function(n){var t=n,f,i,r,e,u;if(t.value=null,h(t),t.dependents={},f=t.obsid,i=t.subscriptions,i){for(r=0;r<i.length;r++)(e=i[r],u=e.dependents,u)&&(u[f]=null);t.subscriptions=null}};var o=function(t,u,f,e){if(e){if(t.fn)throw new Error("Computed observables cannot be assigned to.");r("Updating obs",t.obsid);var o=t.value;t.value=f;u(o,f)||n.updateDependents(t)}else i&&(i[t.obsid]=t);return t.value},a=function(n,t,i){var u=n.value,r=t();return n.value=r,!i(u,r)},e=1,t=[],v=function(n){var i,u,e,f,o;if(!n.isInUpdateQueue){for(r("  Enqueueing obs",n.obsid),i=t.length,t.push(n),n.isInUpdateQueue=!0,u=i>>1,e=n.level;i;){if(f=t[u],o=f.level,o<=e)break;t[i]=f;i=u;u=i>>1}t[i]=n;r("    UpdateQ =",JSON.stringify(t.map(function(n){return n.obsid})))}},y=function(){var u,n,i;if(!t.length)return undefined;u=t[0];u.isInUpdateQueue=!1;r("  Dequeueing obs",u.obsid);var e=t.pop(),o=e.level,f=t.length;if(!f)return u;for(n=0,i=1;i<f;){var s=Math.min(i+1,f-1),h=t[i],c=t[s],l=h.level,a=c.level;if(l<=a){if(o<=l)break;t[n]=h;n=i}else{if(o<=a)break;t[n]=c;n=s}i=n<<1}return t[n]=e,u},f=0;n.startUpdate=function(){f++};n.endUpdate=function(){f&&f--;f===0&&p()};var p=function(){for(;;){var n=y();if(!n)return;s(n)}},i=null,s=function(t){var u,f;r("Reevaluating obs",t.obsid,"...");u=i;i=t.dependencies;h(t);f=c(t);w(t);i=u;f&&n.updateDependents(t);r("Reevaluating obs",t.obsid,"done.")},h=function(n){var u=n.obsid,t=n.dependencies,i,r;if(t)for(i in t)(r=t[i],r)&&(t[i]=null,r.dependents[u]=null)},w=function(n){var f=n.obsid,e=n.dependencies,i=0,o,t,u;for(o in e)(t=e[o],t)&&(t.dependents||(t.dependents={}),t.dependents[f]=n,r("  Obs",f,"depends on obs",t.obsid),u=t.level|0,i<=u&&(i=1+u));n.level=i};n.updateDependents=function(t){var i=t.dependents,u,r;if(i){n.startUpdate();for(u in i)(r=i[u],r)&&v(r);n.endUpdate()}};n.exceptionReporter=function(n){return window.console&&window.console.log?window.console.log(n):alert("Exception reevaluating computed observable:\n"+JSON.stringify(n))};c=function(t){try{return t.fn()}catch(i){return n.exceptionReporter(i),!1}};r=function(){l&&window.console&&window.console.log&&console.log.apply(console,arguments)}})(Obs||(Obs={})),function(n){var g;n.processPendingOdEventsDelay=-1;g=!1;n.flattenVdoms=function(n){var t,i;if(n==null)return null;if(!(n instanceof Array))return[n];var r=n,f=r.length,u=!1;for(t=0;t<f;t++)if(r[t]instanceof Array){u=!0;break}return u?(i=[],a(n,i),i):n};var a=function(n,t){for(var i,u=n.length,r=0;r<u;r++)i=n[r],i instanceof Array?a(i,t):t.push(i)},nt=function(n,t,r){var u=n.toString(),e;return t==null||t.nodeName!=="#text"||f(t)?(e=document.createTextNode(u),i(e,t,r),e):(t.nodeValue!==u&&(t.nodeValue=u),t)},r=function(n,t,i){return n instanceof Function?n(t,i):nt(n,t,i)};n.element=function(t,r,u){t=t.toUpperCase();var s=n.flattenVdoms(u),e=function(n,u){var o=n,e=n==null||o.tagName!==t||f(n)?document.createElement(t):o;return i(e,n,u),ht(e,r),pt(e,s),tt(r,e,o),e},o=r&&r.key;return o!=null&&(e.key=o),e};var tt=function(n,t,i){var r=n&&n.onodevent;if(r!=null){if(t!==i){e.push(t);return}o.push(t)}},i=function(n,t,i){n!==t&&(dt(t),i!=null)&&(n==null?t!=null&&i.removeChild(t):t==null?i.appendChild(n):i.replaceChild(n,t))},f=function(n){return!!it(n)},it=function(n){return n.__Od__componentID},u=function(n,t){n.__Od__componentID=t},v=function(n){u(n,0)},rt=1,t=null,ut=function(n){return n!=null&&t!=null?t.namedSubcomponents[n]:null};n.deferComponentUpdates=!0;n.component=function(f,e){var a=ut(f),h,c,w;if(a!=null)return a;var v=rt++,o={componentID:v,dom:null,obs:null,subs:null,anonymousSubcomponents:[],namedSubcomponents:{},updateIsPending:!1},s=function(n,t){var r=o.dom;return i(r,n,t),r};return t!=null&&(f==null?t.anonymousSubcomponents.push(s):t.namedSubcomponents[f]=s),h=Obs.fn(function(){var i=t,n;return t=o,p(o),n=e(),t=i,n}),c=r(Obs.peek(h),null,null),u(c,v),l(),w=Obs.subscribe([h],function(){n.deferComponentUpdates?ot(o):(y(o),l())}),s.dispose=function(){ft(o)},o.dom=c,o.obs=h,o.subs=w,s.key=c.key,s};var y=function(n){var e=t,f;t=n;var o=n.componentID,i=n.dom,s=n.obs,h=i&&i.parentNode;v(i);f=r(s(),i,h);u(f,o);n.dom=f;n.updateIsPending=!1;t=e},ft=function(n){p(n);et(n);Obs.dispose(n.subs);Obs.dispose(n.obs);var t=n.dom;v(t)},p=function(t){for(var r=t.anonymousSubcomponents,i=r.pop();i!=null;i=r.pop())n.dispose(i)},et=function(t){var i=t.namedSubcomponents,r,u;for(r in i)u=i[r],n.dispose(u),i[r]=null};n.dispose=function(n){var t=n&&n.dispose;t!=null&&t()};var w=[],s=0,ot=function(n){n.updateIsPending||(n.updateIsPending=!0,w.push(n),s===0)&&(s=kt(st))},st=function(){for(var t=w,n=t.pop();n!=null;n=t.pop())y(n);l();s=0};n.fromHtml=function(n){var t=document.createElement("DIV"),r;return t.innerHTML=n,r=t.childNodes.length===1?t.firstChild:t,u(r,Infinity),function(n,t){return i(r,n,t),r}};n.fromDom=function(n){u(n,Infinity);return function(t,r){return i(n,t,r),n}};n.bind=function(n,t){var i=t&&t.parentNode;return r(n,t,i)};n.appendChild=function(n,t){return r(n,null,t)};var ii=function(n){return n instanceof Array},ht=function(n,t){var r=b(n),i,u,f,e,o;if(t)for(i in t)i!=="style"&&yt(n,i,t[i]);if(r)for(i in r)t&&i in t||vt(n,i);u=r&&r.style;f=t&&t.style;ct(n,u,f);e=r&&r.attrs;o=t&&t.attrs;lt(n,e,o);at(n,t)},ct=function(n,t,i){var u,r;if(typeof i=="string"){n.style=i;return}if(!i){t&&(n.style=null);return}u=n.style;for(r in i)u[r]=i[r];if(t)for(r in t)r in i||(u[r]=null)},lt=function(n,t,i){var r;if(i)for(r in i)n.setAttribute(r,i[r]);if(t)for(r in t)i&&r in i||n.removeAttribute(r)},b=function(n){return n.__Od__props},at=function(n,t){n.__Od__props=t},vt=function(n,t){n[t]=null;n instanceof HTMLElement&&n.removeAttribute(t)},yt=function(n,t,i){t==="class"&&(t="className");n[t]=i},pt=function(n,t){var u,e,f,o,s,h;for(t==null&&(t=[]),n.keyed&&wt(t,n),u=n.firstChild,e=t.length,f=0;f<e;f++)o=t[f],s=r(o,u,n),u=s.nextSibling;while(u)h=u.nextSibling,i(null,u,n),u=h},wt=function(n,t){var e=t.firstChild,h=n.length,o,s,i,u,c,f,l,r;if(h!==0&&e){for(o={},i=e;i;i=i.nextSibling){if(s=i.key,s==null)return;o[s]=i}for(i=e,u=0;u<h;u++){if(c=n[u],f=c.key,f==null)return;l=i&&i.key;r=o[f];i?l===f?i=i.nextSibling:r?t.insertBefore(r,i):t.insertBefore(document.createElement("DIV"),i):r?t.appendChild(r):t.appendChild(document.createElement("DIV"))}}},bt=function(n){return setTimeout(n,16)},kt=window.requestAnimationFrame||bt,k=[],dt=function(n){n&&(f(n)||(k.push(n),h===0)&&(h=setTimeout(gt,0)))},h=0,gt=function(){for(var t=k,n=t.pop();n!=null;n=t.pop())d(n);h=0},d=function(n){var t,r,e,u,o,i;if(!f(n)){t=b(n);r=t&&t.onodevent;r&&r("removed",n);for(e in t)n[e]=null;for(u=n.childNodes,o=u.length,i=0;i<o;i++)d(u[i])}},c=!1,e=[],o=[],l=function(){c||(c=!0,ni(),ti(),c=!1)},ni=function(){for(var t,i,n=0;n<e.length;n++)t=e[n],i=t.onodevent,i!=null&&i("created",t);e=[]},ti=function(){for(var t,i,n=0;n<o.length;n++)t=o[n],i=t.onodevent,i!=null&&i("updated",t);o=[]}}(Od||(Od={})),function(n){var t=function(t,i,r){return typeof i=="object"&&!(i instanceof Array)?n.element(t,i,n.flattenVdoms(r)):n.element(t,null,n.flattenVdoms(i))};["A","ABBR","ACRONYM","ADDRESS","APPLET","AREA","ARTICLE","ASIDE","AUDIO","B","BASE","BASEFONT","BDI","BDO","BGSOUND","BIG","BLINK","BLOCKQUOTE","BODY","BR","BUTTON","CANVAS","CAPTION","CENTER","CITE","CODE","COL","COLGROUP","COMMAND","CONTENT","DATA","DATALIST","DD","DEL","DETAILS","DFN","DIALOG","DIR","DIV","DL","DT","ELEMENT","EM","EMBED","FIELDSET","FIGCAPTION","FIGURE","FONT","FOOTER","FORM","FRAME","FRAMESET","H1","H2","H3","H4","H5","H6","HEAD","HEADER","HGROUP","HR","HTML","I","IFRAME","IMAGE","IMG","INPUT","INS","ISINDEX","KBD","KEYGEN","LABEL","LEGEND","LI","LINK","LISTING","MAIN","MAP","MARK","MARQUEE","MENU","MENUITEM","META","METER","MULTICOL","NAV","NOBR","NOEMBED","NOFRAMES","NOSCRIPT","OBJECT","OL","OPTGROUP","OPTION","OUTPUT","P","PARAM","PICTURE","PLAINTEXT","PRE","PROGRESS","Q","RP","RT","RTC","RUBY","S","SAMP","SCRIPT","SECTION","SELECT","SHADOW","SMALL","SOURCE","SPACER","SPAN","STRIKE","STRONG","STYLE","SUB","SUMMARY","SUP","TABLE","TBODY","TD","TEMPLATE","TEXTAREA","TFOOT","TH","THEAD","TIME","TITLE","TR","TRACK","TT","U","UL","VAR","VIDEO","WBR","XMP"].forEach(function(i){n[i]=function(n,r){return t(i,n,r)}})}(Od||(Od={})),function(n){n.addRoute=function(n,i){var r={route:n,matcher:h(n),handler:i};t.push(r)};n.removeRoute=function(n){t=t.filter(function(t){return t.route===n})};n.clearRoutes=function(){t=[]};n.defaultRouteHandler=null;n.takeRoute=function(i){var e=i.lastIndexOf("?"),u="",s,f,o,r;for(e!==-1&&(u=i.substr(e+1),i=i.substr(0,e)),s=i?i.split("/").map(decodeURIComponent):[],f=0;f<t.length;f++)if(o=t[f],r=o.matcher(s,0,{}),r){r["#"]=i;r["?"]=u;u!=null&&(r["?"]=u);o.handler(r);return}n.defaultRouteHandler&&n.defaultRouteHandler(i)};n.startRouter=function(){window.addEventListener("hashchange",r)};n.stopRouter=function(){window.removeEventListener("hashchange",r)};n.parseQuery=function(n){var i=(n||"").replace(/\+/g," ").split(/[&;]/),t={};return i.forEach(function(n){var i=n.indexOf("="),r,u;i===-1&&(i=n.length);r=n.substr(0,i);u=decodeURIComponent(n.substr(i+1));t[r]=u}),t};var i=null,r=function(){var t=location.hash.substr(1);t!==i&&(n.takeRoute(t),i=t)},u=function(n,t,i){return n[t]==null&&i},f=function(n,t){return function(i,r,u){return i[r]===n&&t(i,r+1,u)}},e=function(n,t){return function(i,r,u){var f=i[r];return f==null?null:(u[n]=f,t(i,r+1,u))}},o=function(n,t){return function(i,r,u){var f=i[r];return u[n]=f,t(i,r+1,u)}},s=function(n,t){return function(i,r,u){return u[n]=i.slice(r),t(i,i.length,u)}},h=function(n){var h,t,r,i;if(!n)return u;for(h=n.split("/"),t=u,r=h.length-1;0<=r;r--){i=h[r];switch(i[0]){case":":t=e(i,t);continue;case"?":t=o(i,t);continue;case"*":t=s(i,t);continue;default:t=f(i,t);continue}}return t},t=[]}(Jigsaw||(Jigsaw={})),function(n){var f=1,t,u;n.resolve=function(t){return n.make(function(n){return n(t)})};n.reject=function(t){return n.make(function(n,i){return i(t)})};n.all=function(t){return n.make(function(n){var i=[],r=t.length;t.forEach(function(t,u){t.then(function(t){i[u]=t;--r||n(i)})})})};n.race=function(t){return n.make(function(n){t.forEach(function(t){t.then(function(t){n(t)})})})};n.delay=function(i,r){return n.make(function(n){setTimeout(function(){n(t(r)?r():r)},i)})};t=function(n){return n instanceof Function};u=function(n){return n&&t(n.then)};n.make=function(t){var i={value:null,state:r,onFulfilled:null,onRejected:null,then:null,id:f++},u=function(n){return e(i,n)},s=function(n){return o(i,n)};return t(u,s),i.then=function(t,r){return n.make(function(n,u){i.state(i,t,r,n,u)})},i};var e=function(n,t){n.state===r&&(n.state=s,n.value=t,n.onFulfilled&&setTimeout(n.onFulfilled,0,t),n.onFulfilled=null)},o=function(n,t){n.state===r&&(n.state=h,n.value=t,n.onRejected&&setTimeout(n.onRejected,0,t),n.onRejected=null)},r=function(n,t,r,u,f){var o=n.onFulfilled,e;n.onFulfilled=function(r){o&&o(r);t?i(n,t,u,f):u(r)};e=n.onRejected;n.onRejected=function(t){e&&e(t);r?i(n,r,u,f):f(t)}},s=function(n,t,r,u,f){t&&setTimeout(i,0,n,t,u,f)},h=function(n,t,r,u,f){r&&setTimeout(i,0,n,r,u,f)},i=function(n,i,r,f){try{if(!t(i))return;var o=n.value,e=i(o);if(e===n)throw new TypeError("Cyclic promise.");u(e)?e.then(r,f):r(e)}catch(s){f(s)}}}(Oath||(Oath={})),function(n){n.send=function(n,i){var u,f,e,o;i===void 0&&(i={});var r=new XMLHttpRequest,s=i.method||"GET",h=i.async!==!1,c=i.user,l=i.password;if(r.open(s,n,h,c,l),u=i.requestHeaders,u)for(f in u)e=u[f],r.setRequestHeader(f,e);return i.timeout!=null&&(r.timeout=i.timeout),i.withCredentials!=null&&(r.withCredentials=i.withCredentials),i.onprogress&&r.addEventListener("progress",i.onprogress),i.overrideMimeType&&r.overrideMimeType(i.overrideMimeType),o=Oath.make(function(n,i){r.onreadystatechange=t(r,n,i)}),r.send(i.data),o};var t=function(n,t,i){return function(){n.readyState===4&&(200<=n.status&&n.status<300?t:i)(n)}}}(Xhr||(Xhr={}));