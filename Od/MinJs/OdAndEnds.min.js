var Obs,Od,Jigsaw,Oath,Xhr;(function(n){var l=!1,u,c,r;n.defaultEq=function(n,t){return n===t};n.valueOfEq=function(n,t){return n&&t&&n.valueOf()===t.valueOf()||!n&&!t};n.alwaysUpdate=function(){return!1};n.of=function(t,i){i===void 0&&(i=null);i=i||n.defaultEq;var r=null;return r=function(n){return o(r,i,n,arguments.length)},r.obsid=e++,r.value=t,r.toString=u,r};n.fn=function(t,i){i===void 0&&(i=n.defaultEq);var r=null;return r=function(n){return o(r,i,n,arguments.length)},r.obsid=e++,r.fn=function(){return a(r,t,i)},r.dependencies={},r.toString=u,s(r),r};n.peek=function(n){return n.value};n.isObservable=function(n){return n&&n.obsid&&typeof n=="function"};n.isComputed=function(n){return!!n.fn};n.subscribe=function(n,t){for(var f,h=function(){var n=i;i=null;t();i=n},r=h,c=e++,o=n,s=0;s<o.length;s++)f=o[s],f.dependents||(f.dependents={}),f.dependents[c]=r;return r.obsid=c,r.fn=h,r.value="{subscription}",r.toString=u,r.subscriptions=o,r.level=999999999,r};n.value=function(t){return n.isObservable(t)?t():t};n.toStringMaxValueLength=32;u=function(){var t=JSON.stringify(this.value);return t&&n.toStringMaxValueLength<t.length&&(t=t.substr(0,n.toStringMaxValueLength)+"..."),"{obs "+(this.id||"")+" = "+t+"}"};n.dispose=function(n){var t=n,f,i,r,e,u;if(t.value=null,h(t),t.dependents=null,f=t.obsid,i=t.subscriptions,i){for(r=0;r<i.length;r++)(e=i[r],u=e.dependents,u)&&(u[f]=null);t.subscriptions=null}};var o=function(t,u,f,e){if(e){if(t.fn)throw new Error("Computed observables cannot be assigned to.");r("Updating obs",t.obsid);var o=t.value;t.value=f;u(o,f)||n.updateDependents(t)}else i&&(i[t.obsid]=t);return t.value},a=function(n,t,i){var u=n.value,r=t();return n.value=r,!i(u,r)},e=1,t=[],v=function(n){var i,u,e,f,o;if(!n.isInUpdateQueue){for(r("  Enqueueing obs",n.obsid),i=t.length,t.push(n),n.isInUpdateQueue=!0,u=i>>1,e=n.level;i;){if(f=t[u],o=f.level,o<=e)break;t[i]=f;i=u;u=i>>1}t[i]=n;r("    UpdateQ =",JSON.stringify(t.map(function(n){return n.obsid})))}},y=function(){var u,n,i;if(!t.length)return undefined;u=t[0];u.isInUpdateQueue=!1;r("  Dequeueing obs",u.obsid);var e=t.pop(),o=e.level,f=t.length;if(!f)return u;for(n=0,i=1;i<f;){var s=Math.min(i+1,f-1),h=t[i],c=t[s],l=h.level,a=c.level;if(l<=a){if(o<=l)break;t[n]=h;n=i}else{if(o<=a)break;t[n]=c;n=s}i=n<<1}return t[n]=e,u},f=0;n.startUpdate=function(){f++};n.endUpdate=function(){f&&f--;f===0&&p()};var p=function(){for(;;){var n=y();if(!n)return;s(n)}},i=null,s=function(t){var u,f;r("Reevaluating obs",t.obsid,"...");u=i;i=t.dependencies;h(t);f=c(t);w(t);i=u;f&&n.updateDependents(t);r("Reevaluating obs",t.obsid,"done.")},h=function(n){var u=n.obsid,t=n.dependencies,i,r;if(t)for(i in t)(r=t[i],r)&&(t[i]=null,r.dependents[u]=null)},w=function(n){var f=n.obsid,e=n.dependencies,i=0,o,t,u;for(o in e)(t=e[o],t)&&(t.dependents||(t.dependents={}),t.dependents[f]=n,r("  Obs",f,"depends on obs",t.obsid),u=t.level|0,i<=u&&(i=1+u));n.level=i};n.updateDependents=function(t){var i=t.dependents,u,r;if(i){n.startUpdate();for(u in i)(r=i[u],r)&&v(r);n.endUpdate()}};n.exceptionReporter=function(n){return window.console&&window.console.log?window.console.log(n):alert("Exception reevaluating computed observable:\n"+JSON.stringify(n))};c=function(t){try{return t.fn()}catch(i){return n.exceptionReporter(i),!1}};r=function(){l&&window.console&&window.console.log&&console.log.apply(console,arguments)}})(Obs||(Obs={})),function(n){var rt=!1,w,b,u;n.text=function(n){return{isIVdom:!0,text:u(n)?"":n.toString()}};n.element=function(n,t,i){n=n.toUpperCase();var r=i?b(i)?i:[i]:null;return{isIVdom:!0,tag:n,props:t,children:r}};n.component=function(n,t){var r=ut(n),i;return r?r:(i={isIVdom:!0,obs:null,subcomponents:null,dom:null},i.obs=Obs.fn(function(){return dt(i,t)}),ft(n,i),i)};var t=null,ut=function(n){return n!=null&&t&&t.subcomponents&&t.subcomponents[n]},r="__OdAnonymousSubcomponents__",ft=function(n,i){var u,f;t&&(t.subcomponents||(t.subcomponents={}),u=t.subcomponents,n!=null?u[n]=i:(f=u[r],f?f.push(i):u[r]=[i]))};n.fromHtml=function(n){var t=document.createElement("DIV"),i,r;return t.innerHTML=n,i=t.childNodes.length===1?t.firstChild:t,r={isIVdom:!0,obs:k,subscription:d,dom:i},r};n.fromDom=function(n){return{isIVdom:!0,obs:k,subscription:d,dom:n}};n.bind=function(t,i){var r=i.parentNode;return n.patchDom(t,i,r)};n.appendChild=function(t,i){return n.patchDom(t,null,i)};n.dispose=function(n){var i,t,r,u;n&&(i=n.obs,i&&(Obs.dispose(i),n.obs=null),t=n.dom,t&&(y("removed",t),r=t&&t.parentNode,r&&r.removeChild(t),o(t),n.dom=null),u=n.subcomponents,u&&(w(u),n.subcomponents=null))};w=function(t){var i,u;for(i in t)u=t[i],i===r?u.forEach(n.dispose):n.dispose(u)};n.deferComponentUpdates=!0;b=function(n){return n instanceof Array};u=function(n){return n==null};n.patchDom=function(t,i,r){var u=typeof t=="string"?n.text(t):t;return u.tag?st(u,i,r):u.obs?ot(u,i,r):et(u,i,r)};var et=function(n,t,i){var u=n.text,r=!t||t.nodeName!=="#text"?document.createTextNode(u):t;return r.nodeValue!==u&&(r.nodeValue=u),s(r,t,i),r},ot=function(n,t,i){var r=n.dom;return r!==t&&s(r,t,i),r},st=function(n,t,r){var e=n.tag,o=n.props,h=n.children,u=t,f=!u||u.tagName!==e||l(u)?document.createElement(e):u;return f!==u&&i("  Created",e),ht(f,o),yt(f,h),s(f,t,r),f},ht=function(n,t){var r=c(n),i,u,f,e,o;if(t)for(i in t)i!=="style"&&vt(n,i,t[i]);if(r)for(i in r)i in t||at(n,i);u=r&&r.style;f=t&&t.style;ct(n,u,f);e=r&&r.attrs;o=t&&t.attrs;lt(n,e,o);wt(n,t)},ct=function(n,t,i){var u,r;if(typeof i=="string"){n.style=i;return}if(!i){t&&(n.style=null);return}u=n.style;for(r in i)u[r]=i[r];if(t)for(r in t)r in i||(u[r]=null)},lt=function(n,t,i){var r;if(i)for(r in i)n.setAttribute(r,i[r]);if(t)for(r in t)i&&r in i||n.removeAttribute(r)},at=function(n,t){n[t]=null;n instanceof HTMLElement&&n.removeAttribute(t)},vt=function(n,t,i){t==="class"&&(t="className");n[t]=i},yt=function(t,r){var u,e,f,o,h,c;for(r||(r=[]),t.keyed&&pt(r,t),u=t.firstChild,e=r.length,f=0;f<e;f++)i("Patching child",f+1),o=r[f],h=n.patchDom(o,u,t).nextSibling,u=h,i("Patched child",f+1);while(u)c=u.nextSibling,s(null,u,t),u=c,i("Removed child",++f)},pt=function(n,t){var c,l,r,s,e,f,h,y,o;i("  Reordering keyed children.");var a=n,p=t.firstChild,v=a.length;if(v!==0&&p){for(c={},r=t.firstChild;r;r=r.nextSibling){if(l=r.key,u(l))return;c[l]=r}for(r=t.firstChild,s=0;s<v;s++){if(e=a[s],f=e.tag,u(f)&&e.dom&&(f=e.dom.nodeName),!f)return;if(h=bt(e.props),u(h))return;y=r&&r.key;o=c[h];r?y===h?r=r.nextSibling:o?t.insertBefore(o,r):t.insertBefore(document.createElement(f),r):o?t.appendChild(o):t.appendChild(document.createElement(f))}}},k=Obs.of(null),d=null,ei=function(n){var t,i;if(!n)return null;var r=[],u=Object.keys(n).sort(),f=u.length;for(t=0;t<f;t++)i=u[t],r.push(i,n[i]);return r},c=function(n){return n.__Od__props},wt=function(n,t){n.__Od__props=t},bt=function(n){return n&&n.key},kt=function(n){return n.__Od__component},f=function(n,t){n&&(n.__Od__component=t)},l=function(n){return!!kt(n)},dt=function(i,r){var o,u,e;return gt(i),o=t,t=i,u=r(),t=o,i.dom?ii(i,u):(e=n.patchDom(u,null,null),f(e,i),i.dom=e,y("created",e)),u},gt=function(t){var i=t.subcomponents&&t.subcomponents[r];i&&(i.forEach(n.dispose),t.subcomponents[r]=null)},ni=function(n){return setTimeout(n,16)},ti=window.requestAnimationFrame||ni,e=[],a=0,ii=function(t,i){if(!n.deferComponentUpdates){g(t,i);return}(e.push(t),a)||(a=ti(ri))},ri=function(){for(var r,n,u={},f=e.length,t=0;t<f;t++)(r=e[t],n=r.obs.obsid,u[n])||(i("Patching queued component #",n),g(r),u[n]=!0);e=[];a=0;it()},g=function(t,i){var r,e,u;i=i!=null?i:t.obs();r=t.dom;e=r&&r.parentNode;ui(i,r)?(f(r,null),o(r)):f(r,null);u=n.patchDom(i,r,e);f(u,t);y("updated",u);t.dom=u},ui=function(n,t){return t?typeof n=="string"?t.nodeType!==Node.TEXT_NODE:t.nodeName!==n.tag:!1},v=[],o=function(n){n&&(l(n)||(i("  Discarded",n.nodeName||"#text"),v.push(n),nt)||(nt=setTimeout(fi,100)))},nt=0,fi=function(){for(var n=v.pop();n;)tt(n),n=v.pop()},tt=function(n){var r,u,i,f,t;if(!l(n)){r=c(n);for(u in r)n[u]=null;for(i=n.childNodes,f=i.length,t=0;t<f;t++)tt(i[t])}},s=function(n,t,r){if(n)if(t){if(n===t)return;if(o(t),!r)return;i("  Inserted",n.nodeName||"#text");r&&r.replaceChild(n,t)}else i("  Inserted",n.nodeName||"#text"),r&&r.appendChild(n);else{if(!t)return;o(t);r&&r.removeChild(t)}},y=function(n,t){var i=t&&c(t),r=i&&i.onodevent;r&&((h.push(function(){return r(n,t)}),p)||(p=setTimeout(it,20)))},p=0,h=[],it=function(){for(var n=0;n<h.length;n++)h[n]();h=[];p=0},i=function(){rt&&window.console&&window.console.log&&console.log.apply(console,arguments)}}(Od||(Od={})),function(n){var t=function(n){return n!=null&&(n.isIVdom||n instanceof Array||typeof n=="string")},i=function(i,r,u){var f=t(r);if(f&&u!=null)throw new Error("Od."+i+": given two args, but first arg is not props.");return f?n.element(i,null,r):n.element(i,r,u)};["A","ABBR","ACRONYM","ADDRESS","APPLET","AREA","ARTICLE","ASIDE","AUDIO","B","BASE","BASEFONT","BDI","BDO","BGSOUND","BIG","BLINK","BLOCKQUOTE","BODY","BR","BUTTON","CANVAS","CAPTION","CENTER","CITE","CODE","COL","COLGROUP","COMMAND","CONTENT","DATA","DATALIST","DD","DEL","DETAILS","DFN","DIALOG","DIR","DIV","DL","DT","ELEMENT","EM","EMBED","FIELDSET","FIGCAPTION","FIGURE","FONT","FOOTER","FORM","FRAME","FRAMESET","H1","H2","H3","H4","H5","H6","HEAD","HEADER","HGROUP","HR","HTML","I","IFRAME","IMAGE","IMG","INPUT","INS","ISINDEX","KBD","KEYGEN","LABEL","LEGEND","LI","LINK","LISTING","MAIN","MAP","MARK","MARQUEE","MENU","MENUITEM","META","METER","MULTICOL","NAV","NOBR","NOEMBED","NOFRAMES","NOSCRIPT","OBJECT","OL","OPTGROUP","OPTION","OUTPUT","P","PARAM","PICTURE","PLAINTEXT","PRE","PROGRESS","Q","RP","RT","RTC","RUBY","S","SAMP","SCRIPT","SECTION","SELECT","SHADOW","SMALL","SOURCE","SPACER","SPAN","STRIKE","STRONG","STYLE","SUB","SUMMARY","SUP","TABLE","TBODY","TD","TEMPLATE","TEXTAREA","TFOOT","TH","THEAD","TIME","TITLE","TR","TRACK","TT","U","UL","VAR","VIDEO","WBR","XMP"].forEach(function(t){n[t]=function(n,r){return i(t,n,r)}})}(Od||(Od={})),function(n){n.addRoute=function(n,i){var r={route:n,matcher:s(n),handler:i};t.push(r)};n.removeRoute=function(n){t=t.filter(function(t){return t.route===n})};n.clearRoutes=function(){t=[]};n.defaultRouteHandler=null;n.takeRoute=function(i){var e=i.lastIndexOf("?"),u="",s,f,o,r;for(e!==-1&&(u=i.substr(e+1),i=i.substr(0,e)),s=i?i.split("/").map(decodeURIComponent):[],f=0;f<t.length;f++)if(o=t[f],r=o.matcher(s,0,{}),r){r["#"]=i;r["?"]=u;u!=null&&(r["?"]=u);o.handler(r);return}n.defaultRouteHandler&&n.defaultRouteHandler(i)};n.startRouter=function(){window.addEventListener("hashchange",i)};n.stopRouter=function(){window.removeEventListener("hashchange",i)};n.parseQuery=function(n){var i=(n||"").replace(/\+/g," ").split(/[&;]/),t={};return i.forEach(function(n){var i=n.indexOf("="),r,u;i===-1&&(i=n.length);r=n.substr(0,i);u=decodeURIComponent(n.substr(i+1));t[r]=u}),t};var i=function(){n.takeRoute(location.hash.substr(1))},r=function(n,t,i){return n[t]==null&&i},u=function(n,t){return function(i,r,u){return i[r]===n&&t(i,r+1,u)}},f=function(n,t){return function(i,r,u){var f=i[r];return f==null?null:(u[n]=f,t(i,r+1,u))}},e=function(n,t){return function(i,r,u){var f=i[r];return u[n]=f,t(i,r+1,u)}},o=function(n,t){return function(i,r,u){return u[n]=i.slice(r),t(i,i.length,u)}},s=function(n){var h,t,s,i;if(!n)return r;for(h=n.split("/"),t=r,s=h.length-1;0<=s;s--){i=h[s];switch(i[0]){case":":t=f(i,t);continue;case"?":t=e(i,t);continue;case"*":t=o(i,t);continue;default:t=u(i,t);continue}}return t},t=[]}(Jigsaw||(Jigsaw={})),function(n){var f=1,t,u;n.resolve=function(t){return n.make(function(n){return n(t)})};n.reject=function(t){return n.make(function(n,i){return i(t)})};n.all=function(t){return n.make(function(n){var i=[],r=t.length;t.forEach(function(t,u){t.then(function(t){i[u]=t;--r||n(i)})})})};n.race=function(t){return n.make(function(n){t.forEach(function(t){t.then(function(t){n(t)})})})};n.delay=function(i,r){return n.make(function(n){setTimeout(function(){n(t(r)?r():r)},i)})};t=function(n){return typeof n=="function"};u=function(n){return n&&t(n.then)};n.make=function(t){var i={value:null,state:r,onFulfilled:null,onRejected:null,then:null,id:f++},u=function(n){return e(i,n)},s=function(n){return o(i,n)};return t(u,s),i.then=function(t,r){return n.make(function(n,u){i.state(i,t,r,n,u)})},i};var e=function(n,t){n.state===r&&(n.state=s,n.value=t,n.onFulfilled&&setTimeout(n.onFulfilled,0,t),n.onFulfilled=null)},o=function(n,t){n.state===r&&(n.state=h,n.value=t,n.onRejected&&setTimeout(n.onRejected,0,t),n.onRejected=null)},r=function(n,t,r,u,f){var o=n.onFulfilled,e;t&&(n.onFulfilled=function(r){o&&o(r);i(n,t,u,f)});e=n.onRejected;r&&(n.onRejected=function(t){e&&e(t);i(n,r,u,f)})},s=function(n,t,r,u,f){setTimeout(i,0,n,t,u,f)},h=function(n,t,r,u,f){setTimeout(i,0,n,r,u,f)},i=function(n,i,r,f){try{if(!t(i))return;var o=n.value,e=i(o);if(e===n)throw new TypeError("Cyclic promise.");u(e)?e.then(r,f):r(e)}catch(s){f(s)}}}(Oath||(Oath={})),function(n){n.send=function(n,i){var u,f,e,o;i===void 0&&(i={});var r=new XMLHttpRequest,s=i.method||"GET",h=i.async!==!1,c=i.user,l=i.password;if(r.open(s,n,h,c,l),u=i.requestHeaders,u)for(f in u)e=u[f],r.setRequestHeader(f,e);return i.timeout!=null&&(r.timeout=i.timeout),i.withCredentials!=null&&(r.withCredentials=i.withCredentials),i.onprogress&&r.addEventListener("progress",i.onprogress),i.overrideMimeType&&r.overrideMimeType(i.overrideMimeType),o=Oath.make(function(n,i){r.onreadystatechange=t(r,n,i)}),r.send(i.data),o};var t=function(n,t,i){return function(){n.readyState===4&&(200<=n.status&&n.status<300?t:i)(n)}}}(Xhr||(Xhr={}));