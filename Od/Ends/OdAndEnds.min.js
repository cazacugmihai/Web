var Obs,Od;(function(n){var l=!1,u,c,r;n.defaultEq=function(n,t){return n===t};n.valueOfEq=function(n,t){return n&&t&&n.valueOf()===t.valueOf()||!n&&!t};n.alwaysUpdate=function(){return!1};n.of=function(t,i){i===void 0&&(i=null);i=i||n.defaultEq;var r=null;return r=function(n){return o(r,i,n,arguments.length)},r.obsid=e++,r.value=t,r.toString=u,r};n.fn=function(t,i){i===void 0&&(i=n.defaultEq);var r=null;return r=function(n){return o(r,i,n,arguments.length)},r.obsid=e++,r.fn=function(){return a(r,t,i)},r.dependencies={},r.toString=u,s(r),r};n.peek=function(n){return n.value};n.isObservable=function(n){return n&&n.obsid&&typeof n=="function"};n.isComputed=function(n){return!!n.fn};n.subscribe=function(n,t){for(var f,h=function(){var n=i;i=null;t();i=n},r=h,c=e++,o=n,s=0;s<o.length;s++)f=o[s],f.dependents||(f.dependents={}),f.dependents[c]=r;return r.obsid=c,r.fn=h,r.value="{subscription}",r.toString=u,r.subscriptions=o,r.level=999999999,r};n.value=function(t){return n.isObservable(t)?t():t};n.toStringMaxValueLength=32;u=function(){var t=JSON.stringify(this.value);return t&&n.toStringMaxValueLength<t.length&&(t=t.substr(0,n.toStringMaxValueLength)+"..."),"{obs "+this.id+" = "+t+"}"};n.dispose=function(n){var t=n,f,i,r,e,u;if(t.value=null,h(t),t.dependents=null,f=t.obsid,i=t.subscriptions,i){for(r=0;r<i.length;r++)(e=i[r],u=e.dependents,u)&&(u[f]=null);t.subscriptions=null}};var o=function(t,u,f,e){if(e){if(t.fn)throw new Error("Computed observables cannot be assigned to.");r("Updating obs",t.obsid);var o=t.value;t.value=f;u(o,f)||n.updateDependents(t)}else i&&(i[t.obsid]=t);return t.value},a=function(n,t,i){var u=n.value,r=t();return n.value=r,!i(u,r)},e=1,t=[],v=function(n){var i,u,e,f,o;if(!n.isInUpdateQueue){for(r("  Enqueueing obs",n.obsid),i=t.length,t.push(n),n.isInUpdateQueue=!0,u=i>>1,e=n.level;i;){if(f=t[u],o=f.level,o<=e)break;t[i]=f;i=u;u=i>>1}t[i]=n;r("    UpdateQ =",JSON.stringify(t.map(function(n){return n.obsid})))}},y=function(){var u,n,i;if(!t.length)return undefined;u=t[0];u.isInUpdateQueue=!1;r("  Dequeueing obs",u.obsid);var e=t.pop(),o=e.level,f=t.length;if(!f)return u;for(n=0,i=1;i<f;){var s=Math.min(i+1,f-1),h=t[i],c=t[s],l=h.level,a=c.level;if(l<=a){if(o<=l)break;t[n]=h;n=i}else{if(o<=a)break;t[n]=c;n=s}i=n<<1}return t[n]=e,u},f=0;n.startUpdate=function(){f++};n.endUpdate=function(){f&&f--;f===0&&p()};var p=function(){for(;;){var n=y();if(!n)return;s(n)}},i=null,s=function(t){var u,f;r("Reevaluating obs",t.obsid,"...");u=i;i=t.dependencies;h(t);f=c(t);w(t);i=u;f&&n.updateDependents(t);r("Reevaluating obs",t.obsid,"done.")},h=function(n){var u=n.obsid,t=n.dependencies,i,r;if(t)for(i in t)(r=t[i],r)&&(t[i]=null,r.dependents[u]=null)},w=function(n){var f=n.obsid,e=n.dependencies,i=0,o,t,u;for(o in e)(t=e[o],t)&&(t.dependents||(t.dependents={}),t.dependents[f]=n,r("  Obs",f,"depends on obs",t.obsid),u=t.level|0,i<=u&&(i=1+u));n.level=i};n.updateDependents=function(t){var i=t.dependents,u,r;if(i){n.startUpdate();for(u in i)(r=i[u],r)&&v(r);n.endUpdate()}};n.exceptionReporter=function(n){return window.console&&window.console.log?window.console.log(n):alert("Exception reevaluating computed observable:\n"+JSON.stringify(n))};c=function(t){try{return t.fn()}catch(i){return n.exceptionReporter(i),!1}};r=function(){l&&window.console&&window.console.log&&console.log.apply(console,arguments)}})(Obs||(Obs={})),function(n){function vt(){var t=this,i,f,e,r;if(yt(t),i=t.dom,i){bt(t);return}f=t.obs();e=i&&i.parentNode;u(i,null);r=n.patchDom(f,i,e);u(r,t);t.dom=r}var d=!1,l,a,r;n.text=function(n){return{text:r(n)?"":n.toString()}};n.element=function(n,t,i){n=n.toUpperCase();var r=i?a(i)?i:[i]:null;return{tag:n,props:t,children:r}};n.component=function(t){return n.namedComponent(null,t)};n.namedComponent=function(n,i){var u=g(n),o;if(u)return u;var f=Obs.isObservable(i)?i:Obs.fn(i),r={obs:f,subscription:null,subcomponents:null,dom:null},e=Obs.subscribe([f],vt.bind(r));return r.subscription=e,nt(n,r),o=t,t=null,e(),r.subcomponents=t,t=o,r};var t=null,g=function(n){return n&&t&&t[n]},nt=function(n,i){if(t||(t={}),n){t[n]=i;return}""in t||(t[""]=[]);t[""].push(i)};n.fromHtml=function(n){var t=document.createElement("DIV"),i,r;return t.innerHTML=n,i=t.childNodes.length===1?t.firstChild:t,r={obs:v,subscription:y,dom:i},r};n.fromDom=function(n){return{obs:v,subscription:y,dom:n}};n.bind=function(t,i){var r=i.parentNode;n.patchDom(t,i,r)};n.appendChild=function(t,i){n.patchDom(t,null,i)};n.dispose=function(n){n&&(n.obs&&(Obs.dispose(n.obs),n.obs=null),n.subscription&&(Obs.dispose(n.subscription),n.subscription=null),n.dom&&(e(n.dom),n.dom=null),n.subcomponents&&(l(n.subcomponents),n.subcomponents=null))};l=function(t){var i,r;for(i in t)r=t[i],i===""?r.forEach(n.dispose):n.dispose(r)};n.deferComponentUpdates=!0;a=function(n){return n instanceof Array};r=function(n){return n==null};n.patchDom=function(t,i,r){var u=typeof t=="string"?n.text(t):t;return u.tag?rt(u,i,r):u.obs?it(u,i,r):tt(u,i,r)};var tt=function(n,t,i){var u=n.text,r=!t||t.nodeName!=="#text"?document.createTextNode(u):t;return r.textContent!==u&&(r.textContent=u),o(r,t,i),r},it=function(n,t,i){var r=n.dom;return r!==t&&o(r,t,i),r},rt=function(n,t,r){var e=n.tag,h=n.props,c=n.children,u=t,f=!u||u.tagName!==e||s(u)?document.createElement(e):u;return f!==u&&i("  Created",e),ut(f,h),st(f,c),o(f,t,r),f},ut=function(n,t){var r=p(n);for(var i in t)et(n,i,t[i]);for(i in r)i in t||ft(n,i);ct(n,t)},ft=function(n,t){n[t]=null;n instanceof HTMLElement&&n.removeAttribute(t)},et=function(n,t,i){n[t]=i},ot=[],st=function(t,r){var u,h,f;r||(r=ot);t.keyed&&ht(r,t);var e=t.childNodes,c=e.length,s=r.length;for(u=c-1;s<=u;u--)f=e[u],o(null,f,t),i("Removed child",u+1);for(u=0;u<s;u++)i("Patching child",u+1),h=r[u],f=e[u],n.patchDom(h,f,t),i("Patched child",u+1)},ht=function(n,t){var c,l,u,s,e,f,h,y,o;i("  Reordering keyed children.");var a=n,p=t.firstChild,v=a.length;if(v!==0&&p){for(c={},u=t.firstChild;u;u=u.nextSibling){if(l=u.key,r(l))return;c[l]=u}for(u=t.firstChild,s=0;s<v;s++){if(e=a[s],f=e.tag,r(f)&&e.dom&&(f=e.dom.nodeName),!f)return;if(h=lt(e.props),r(h))return;y=u&&u.key;o=c[h];u?y===h?u=u.nextSibling:o?t.insertBefore(o,u):t.insertBefore(document.createElement(f),u):o?t.appendChild(o):t.appendChild(document.createElement(f))}}},v=Obs.of(null),y=null,ni=function(n){var t,i;if(!n)return null;var r=[],u=Object.keys(n).sort(),f=u.length;for(t=0;t<f;t++)i=u[t],r.push(i,n[i]);return r},p=function(n){return n.__Od__props},ct=function(n,t){n.__Od__props=t},lt=function(n){return n&&n.key},at=function(n){return n.__Od__component},u=function(n,t){n&&(n.__Od__component=t)},s=function(n){return!!at(n)};var yt=function(t){var i=t.subcomponents&&t.subcomponents[""];i&&(i.forEach(n.dispose),t.subcomponents[""]=null)},pt=function(n){return setTimeout(n,16)},wt=window.requestAnimationFrame||pt,f=[],h=0,bt=function(t){if(!n.deferComponentUpdates){w(t);return}(f.push(t),h)||(h=wt(kt))},kt=function(){for(var r,n,u={},e=f.length,t=0;t<e;t++)(r=f[t],n=r.obs.obsid,u[n])||(i("Patching queued component #",n),w(r),u[n]=!0);f=[];h=0},w=function(t){var f=t.obs(),i=t.dom,o=i&&i.parentNode,r;dt(f,i)?(u(i,null),e(i)):u(i,null);r=n.patchDom(f,i,o);u(r,t);t.dom=r},dt=function(n,t){return t?typeof n=="string"?t.nodeType!==Node.TEXT_NODE:t.nodeName!==n.tag:!1},c=[],e=function(n){n&&(s(n)||(i("  Discarded",n.nodeName||"#text"),c.push(n),b)||(b=setTimeout(gt,100)))},b=0,gt=function(){for(var n=c.pop();n;)k(n),n=c.pop()},k=function(n){var r,u,i,f,t;if(!s(n)){r=p(n);for(u in r)n[u]=null;for(i=n.childNodes,f=i.length,t=0;t<f;t++)k(i[t])}},o=function(n,t,r){if(n)if(t){if(n===t)return;if(e(t),!r)return;i("  Inserted",n.nodeName||"#text");r&&r.replaceChild(n,t)}else i("  Inserted",n.nodeName||"#text"),r&&r.appendChild(n);else{if(!t)return;e(t);r&&r.removeChild(t)}},i=function(){d&&window.console&&window.console.log&&console.log.apply(console,arguments)}}(Od||(Od={})),function(n){var t=function(n){return n instanceof Array||typeof n=="string"||"tag"in n||"obs"in n||"text"in n},i=function(i,r,u){var f=t(r);if(f&&u!=null)throw new Error("Od."+i+": given two args, but first arg is not props.");return f?n.element(i,null,r):n.element(i,r,u)};["A","ABBR","ACRONYM","ADDRESS","APPLET","AREA","ARTICLE","ASIDE","AUDIO","B","BASE","BASEFONT","BDI","BDO","BGSOUND","BIG","BLINK","BLOCKQUOTE","BODY","BR","BUTTON","CANVAS","CAPTION","CENTER","CITE","CODE","COL","COLGROUP","COMMAND","CONTENT","DATA","DATALIST","DD","DEL","DETAILS","DFN","DIALOG","DIR","DIV","DL","DT","ELEMENT","EM","EMBED","FIELDSET","FIGCAPTION","FIGURE","FONT","FOOTER","FORM","FRAME","FRAMESET","HEAD","HEADER","HGROUP","HR","HTML","I","IFRAME","IMAGE","IMG","INPUT","INS","ISINDEX","KBD","KEYGEN","LABEL","LEGEND","LI","LINK","LISTING","MAIN","MAP","MARK","MARQUEE","MENU","MENUITEM","META","METER","MULTICOL","NAV","NOBR","NOEMBED","NOFRAMES","NOSCRIPT","OBJECT","OL","OPTGROUP","OPTION","OUTPUT","P","PARAM","PICTURE","PLAINTEXT","PRE","PROGRESS","Q","RP","RT","RTC","RUBY","S","SAMP","SCRIPT","SECTION","SELECT","SHADOW","SMALL","SOURCE","SPACER","SPAN","STRIKE","STRONG","STYLE","SUB","SUMMARY","SUP","TABLE","TBODY","TD","TEMPLATE","TEXTAREA","TFOOT","TH","THEAD","TIME","TITLE","TR","TRACK","TT","U","UL","VAR","VIDEO","WBR","XMP"].forEach(function(t){n[t]=function(n,r){return i(t,n,r)}})}(Od||(Od={})),function(n){n.selectComponent=function(r){var f=r.props||{};f.onchange=function(n){t(Obs.value(r.options),r.selection,n.target.selectedIndex)};var e=r.optionView||i,u=n.element;return n.component(function(){for(var i=r.props||{},t=Obs.value(r.options),f=r.selection(),o=t.length,n=0;n<o;n++)if(t[n]===f)break;return n===o&&(f!==null&&r.selection(null),n=-1),i.selectedIndex=n,u("SELECT",i,t.map(function(n){return u("OPTION",null,e(n))}))})};var t=function(n,t,i){i!=null&&t(n[i])},i=function(n){return n==null?"null":n.toString()}}(Od||(Od={})),function(n){n.withClassName=function(n,t){var i,r;return t=t||{},i=t.className||"",n=" "+n+" ",r=i.indexOf(n)===-1,r&&(t.className=n+i),t}}(Od||(Od={})),function(n){n.tabComponent=function(r){var u=n.element,f=r.selection||Obs.of(null);return n.component(function(){var e=Obs.value(r.tabs);return u("DIV",n.withClassName("OdTabComponent",Obs.value(r.props)),[u("DIV",{className:"OdTabHeadings"},e.map(function(n){return t(f,n)})),u("DIV",{className:"OdTabBody"},i(f()))])})};var t=function(t,i){var u=n.element,f=Obs.value(i.heading),r=Obs.value(t),e=r===i?"OdTabHeading OdTabSelection":"OdTabHeading";return u("DIV",{className:e,onclick:function(){r!==i&&t(i)}},f)},i=function(n){return n?n.body:""}}(Od||(Od={}));